I’m having multiple data persistence and session-related issues in my production Replit app. I want to address each of them carefully and make sure nothing is lost. I’m using PostgreSQL as my backend database. Please help me make the following specific changes and checks:

1. Ensure all data submissions are properly saved to the PostgreSQL database, not just held in memory or local storage.
	•	Inspect the current data-saving logic and verify that INSERT or UPDATE queries are being run correctly after form submission.
	•	Make sure database connections are established and committed properly.
	•	Add error-handling so failed writes are logged and retryable.

2. Fix form behavior to distinguish between creating a new client and editing an existing one.
	•	When creating a new client, the form should clear all fields after successful submission.
	•	When editing an existing client, the form should be pre-filled with the client’s current data, and should not be cleared on save.
	•	Ensure this logic is tied to whether the form is in “edit mode” or “create mode”.

3. When a user logs in, all of their previously saved data should be retrieved from the PostgreSQL database and displayed.
	•	Add logic on the login event (or page load after login) to call an API endpoint like /api/getUserData that queries and returns the user’s stored data.
	•	Populate the data table or view accordingly.

4. Prevent data loss when internet connectivity is interrupted, such as when using a mobile hotspot.
	•	Implement frontend logic to detect if the browser is offline when a submission is attempted.
	•	If offline, queue the request in local storage or memory and retry it automatically once the user comes back online.
	•	You can use navigator.onLine and window.addEventListener('online', () => ...) to help with this.

5. Make sure that on logout and re-login, the user’s data is not lost.
	•	Ensure that sessions are authenticated and that data is re-fetched fresh from the database after login.
	•	Check that nothing is being stored only in session memory or temporary local state that’s cleared on logout.

I’ve already exported a CSV of my current production data. Please make sure any changes you make do not overwrite or delete existing data in the database.